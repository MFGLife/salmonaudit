<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courtroom Bingo - Corrupt Judge Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: confetti 3s ease-in-out forwards;
            z-index: 1000;
        }
        .bingo-cell {
            transition: all 0.3s ease;
        }
        .bingo-cell:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .bingo-cell.selected {
            background-color: #f0fdf4;
            position: relative;
            overflow: hidden;
        }
        .bingo-cell.selected::after {
            content: "âœ“";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: #10b981;
            opacity: 0.3;
            font-weight: bold;
        }
        .bingo-line {
            position: absolute;
            background-color: #ef4444;
            z-index: 10;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="confetti-container"></div>
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-red-600 mb-2">
                <i class="fas fa-gavel mr-2"></i>Corrupt Judge Bingo
            </h1>
            <p class="text-gray-600 text-lg">Mark the squares when you hear these classic corrupt judge tactics</p>
            <div class="mt-4 flex justify-center space-x-4">
                <button id="new-game" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                    <i class="fas fa-sync-alt mr-2"></i>New Game
                </button>
                <button id="how-to-play" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">
                    <i class="fas fa-question-circle mr-2"></i>How to Play
                </button>
            </div>
        </header>

        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="grid grid-cols-5 gap-4 relative" id="bingo-grid">
                <!-- Bingo cells will be generated by JavaScript -->
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-chart-bar mr-2"></i>Stats
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-800">Selected Squares</h3>
                    <p class="text-3xl font-bold text-green-600" id="selected-count">0</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800">Bingos</h3>
                    <p class="text-3xl font-bold text-blue-600" id="bingo-count">0</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-purple-800">Current Streak</h3>
                    <p class="text-3xl font-bold text-purple-600" id="streak-count">0</p>
                </div>
            </div>
        </div>
    </div>

    <!-- How to Play Modal -->
    <div id="how-to-play-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-gray-800">How to Play</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <p>Mark a square when you hear the judge say or do any of these corrupt behaviors.</p>
                <p>Get 5 in a row (horizontally, vertically, or diagonally) to score a BINGO!</p>
                <p class="font-semibold text-red-600">Warning:</p>
                <p>This game is for entertainment purposes only. If you're facing actual judicial corruption, please consult with a legal professional.</p>
            </div>
        </div>
    </div>

    <!-- Bingo Celebration Modal -->
    <div id="bingo-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 text-center">
            <div class="text-6xl text-green-500 mb-4">
                <i class="fas fa-trophy"></i>
            </div>
            <h3 class="text-3xl font-bold text-gray-800 mb-2">BINGO!</h3>
            <p class="text-gray-600 mb-6">You've identified a pattern of judicial misconduct!</p>
            <button id="close-bingo-modal" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg">
                Continue Playing
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Bingo phrases
            const bingoPhrases = [
                "Unwarranted contempt threat",
                "Ignores valid objections",
                "Favors prosecution/plaintiff",
                "Rushes proceedings",
                "Denies proper evidence",
                "Personal attacks on counsel",
                "Ex parte communication",
                "Violates due process",
                "Threatens sanctions",
                "FREE SPACE (Corruption Likely)",
                "Shuts down valid arguments",
                "Shows clear bias",
                "Makes up procedure",
                "Ignores precedent",
                "Yells at defendant",
                "Cuts off defense",
                "Helps prosecution",
                "Skips proper steps",
                "Threatens to end court",
                "Mocks the defense",
                "Violates rights knowingly",
                "Fast-tracks to conviction",
                "Denies continuances",
                "Fabricates facts",
                "Protects connected parties"
            ];

            // Game state
            let gameState = {
                selectedCells: [],
                bingos: 0,
                streak: 0,
                lines: []
            };

            // DOM elements
            const bingoGrid = document.getElementById('bingo-grid');
            const selectedCount = document.getElementById('selected-count');
            const bingoCount = document.getElementById('bingo-count');
            const streakCount = document.getElementById('streak-count');
            const newGameBtn = document.getElementById('new-game');
            const howToPlayBtn = document.getElementById('how-to-play');
            const howToPlayModal = document.getElementById('how-to-play-modal');
            const closeModalBtn = document.getElementById('close-modal');
            const bingoModal = document.getElementById('bingo-modal');
            const closeBingoModal = document.getElementById('close-bingo-modal');
            const confettiContainer = document.getElementById('confetti-container');

            // Initialize the game
            function initGame() {
                // Clear previous game
                bingoGrid.innerHTML = '';
                gameState.selectedCells = [];
                gameState.lines = [];
                
                // Shuffle the phrases (except keep FREE SPACE in the center)
                const shuffledPhrases = [...bingoPhrases];
                const freeSpaceIndex = shuffledPhrases.indexOf("FREE SPACE (Corruption Likely)");
                shuffledPhrases.splice(freeSpaceIndex, 1);
                
                // Fisher-Yates shuffle
                for (let i = shuffledPhrases.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledPhrases[i], shuffledPhrases[j]] = [shuffledPhrases[j], shuffledPhrases[i]];
                }
                
                // Insert FREE SPACE in the center
                shuffledPhrases.splice(12, 0, "FREE SPACE (Corruption Likely)");
                
                // Create bingo grid
                shuffledPhrases.forEach((phrase, index) => {
                    const cell = document.createElement('div');
                    cell.className = 'bingo-cell bg-white border border-gray-200 rounded-lg p-2 md:p-4 flex items-center justify-center text-center cursor-pointer h-24 md:h-32';
                    cell.dataset.index = index;
                    cell.innerHTML = `<span class="text-xs md:text-sm font-medium">${phrase}</span>`;
                    
                    cell.addEventListener('click', () => toggleCell(cell, index));
                    
                    // Center cell is automatically selected
                    if (index === 12) {
                        cell.classList.add('selected');
                        gameState.selectedCells.push(index);
                    }
                    
                    bingoGrid.appendChild(cell);
                });
                
                updateStats();
            }

            // Toggle cell selection
            function toggleCell(cell, index) {
                if (cell.classList.contains('selected')) {
                    cell.classList.remove('selected');
                    gameState.selectedCells = gameState.selectedCells.filter(i => i !== index);
                } else {
                    cell.classList.add('selected');
                    gameState.selectedCells.push(index);
                }
                
                updateStats();
                checkBingo();
            }

            // Update statistics display
            function updateStats() {
                selectedCount.textContent = gameState.selectedCells.length;
                bingoCount.textContent = gameState.bingos;
                streakCount.textContent = gameState.streak;
            }

            // Check for bingo
            function checkBingo() {
                const size = 5;
                const bingoLines = [];
                
                // Check rows
                for (let row = 0; row < size; row++) {
                    const start = row * size;
                    const end = start + size;
                    const rowCells = gameState.selectedCells.filter(index => index >= start && index < end);
                    if (rowCells.length === size) {
                        bingoLines.push({type: 'row', index: row});
                    }
                }
                
                // Check columns
                for (let col = 0; col < size; col++) {
                    const colCells = [];
                    for (let row = 0; row < size; row++) {
                        const index = row * size + col;
                        if (gameState.selectedCells.includes(index)) {
                            colCells.push(index);
                        }
                    }
                    if (colCells.length === size) {
                        bingoLines.push({type: 'column', index: col});
                    }
                }
                
                // Check diagonals
                const diag1 = [0, 6, 12, 18, 24];
                const diag2 = [4, 8, 12, 16, 20];
                
                if (diag1.every(index => gameState.selectedCells.includes(index))) {
                    bingoLines.push({type: 'diagonal', index: 1});
                }
                
                if (diag2.every(index => gameState.selectedCells.includes(index))) {
                    bingoLines.push({type: 'diagonal', index: 2});
                }
                
                // If we have new bingo lines that weren't there before
                const newLines = bingoLines.filter(line => 
                    !gameState.lines.some(existingLine => 
                        existingLine.type === line.type && existingLine.index === line.index
                    )
                );
                
                if (newLines.length > 0) {
                    gameState.lines = [...gameState.lines, ...newLines];
                    gameState.bingos += newLines.length;
                    gameState.streak++;
                    showBingo(newLines);
                }
            }

            // Show bingo celebration
            function showBingo(lines) {
                // Draw lines on the bingo grid
                lines.forEach(line => {
                    const lineElement = document.createElement('div');
                    lineElement.className = 'bingo-line';
                    
                    const cellSize = document.querySelector('.bingo-cell').getBoundingClientRect();
                    const gridRect = bingoGrid.getBoundingClientRect();
                    
                    if (line.type === 'row') {
                        lineElement.style.width = `${cellSize.width * 5 + 16}px`;
                        lineElement.style.height = '4px';
                        lineElement.style.top = `${cellSize.height * (line.index + 0.5) + gridRect.top - document.documentElement.scrollTop + (line.index * 16)}px`;
                        lineElement.style.left = `${gridRect.left}px`;
                    } else if (line.type === 'column') {
                        lineElement.style.width = '4px';
                        lineElement.style.height = `${cellSize.height * 5 + 16}px`;
                        lineElement.style.left = `${cellSize.width * (line.index + 0.5) + gridRect.left}px`;
                        lineElement.style.top = `${gridRect.top - document.documentElement.scrollTop}px`;
                    } else if (line.type === 'diagonal') {
                        lineElement.style.width = `${Math.sqrt(2) * (cellSize.width * 5 + 16)}px`;
                        lineElement.style.height = '4px';
                        lineElement.style.top = `${cellSize.height * 2.5 + gridRect.top - document.documentElement.scrollTop + 32}px`;
                        lineElement.style.left = `${gridRect.left}px`;
                        lineElement.style.transformOrigin = '0 0';
                        lineElement.style.transform = line.index === 1 ? 'rotate(45deg)' : 'rotate(-45deg)';
                    }
                    
                    document.body.appendChild(lineElement);
                    setTimeout(() => {
                        lineElement.remove();
                    }, 3000);
                });
                
                // Show modal and create confetti
                bingoModal.classList.remove('hidden');
                createConfetti();
            }

            // Create confetti effect
            function createConfetti() {
                const colors = ['#ef4444', '#3b82f6', '#10b981', '#f59e0b', '#8b5cf6'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    
                    confettiContainer.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }

            // Event listeners
            newGameBtn.addEventListener('click', () => {
                gameState.bingos = 0;
                gameState.streak = 0;
                initGame();
            });

            howToPlayBtn.addEventListener('click', () => {
                howToPlayModal.classList.remove('hidden');
            });

            closeModalBtn.addEventListener('click', () => {
                howToPlayModal.classList.add('hidden');
            });

            closeBingoModal.addEventListener('click', () => {
                bingoModal.classList.add('hidden');
            });

            // Initialize the game on load
            initGame();
        });
    </script>
</body>
</html>